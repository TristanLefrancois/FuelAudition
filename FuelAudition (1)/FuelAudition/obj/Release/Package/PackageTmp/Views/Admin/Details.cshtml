@using FuelAudition.Models.Enum;
@model FuelAudition.Models.ClientFournisseur
@{
    ViewBag.Title = "Details";
    ViewBag.Description = "Approuver ou refuser la marge du client";
}
@if (ViewBag.Enregistrer != null && (bool)ViewBag.Enregistrer)
{
    <div>
        <div class="callout callout-success">
            <h4><i class="fa fa-check-circle" style="margin-right:20px"></i>@Resources.GlobalEnregistrementMessage</h4>

        </div>

    </div>
}

<div class="form-group">
    @Html.ActionLink(@Resources.GlobalBoutonRetour, "Rechercher", "Admin", null, new { @class = "btn btn-primary" })

</div>

<div class="row">


    <h3 style="margin-top:5px;margin-left:15px">@Resources.ClientDetailsTitreSectionClient</h3>
    <div class="col-md-8">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="box-body">


                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.Nom, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.Nom, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">

                        <div class="col-md-4 form-group" style="padding:0px">
                            @Html.LabelFor(model => model.Client.Telephone, new { @class = "control-label" })

                            <div class="input-group">
                                @Html.DisplayFor(model => model.Client.Telephone, new { @class = "form-control", maxlength = 50 })

                            </div>

                        </div>

                        <div class="col-md-3 col-md-offset-1 form-group" style="padding:0px">
                            @Html.LabelFor(model => model.Client.Inter, new { @class = "control-label" })
                            <div class="input-group">
                                @Html.DisplayFor(model => model.Client.Inter, new { @class = "form-control", maxlength = 10 })
                            </div>

                        </div>
                    </div>

                    <div class="clearfix hidden-sm hidden-xs"></div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.FAX, new { @class = "control-label" })

                        <div class="input-group col-md-4">
                            @Html.DisplayFor(model => model.Client.FAX, new { @class = "form-control", maxlength = 50 })

                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.Email, new { @class = "control-label" })

                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.Email, new { @class = "form-control", maxlength = 250 })

                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.Adresse1, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.Adresse1, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.Adresse2, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.Adresse2, new { @class = "form-control", maxlength = 50 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Ville", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.Ville.Nom, new { @class = "form-control" })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.CodePostal, new { @class = "control-label" })
                        <div class="input-group col-md-4">
                            @Html.DisplayFor(model => model.Client.CodePostal, new { @class = "form-control", maxlength = 10 })

                        </div>

                    </div>
                    <div class="form-group">
                        @Html.Label("Langue", new { @class = "control-label" })
                        <div class="input-group col-md-4">
                            @Html.DisplayFor(model => model.Client.Langue.NomFr, new { @class = "form-control" })

                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <h3 style="margin-top:5px;margin-left:15px">@Resources.ClientDetailsTitreSectionContact</h3>
    <div class="col-md-8">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="box-body">


                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.ContactNom, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.ContactNom, new { @class = "form-control", maxlength = 50 })
                        </div>

                    </div>

                    <div class="form-group">

                        <div class="col-md-4 form-group" style="padding:0px">
                            @Html.LabelFor(model => model.Client.ContactTelephone, new { @class = "control-label" })

                            <div class="input-group">
                                @Html.DisplayFor(model => model.Client.ContactTelephone, new { @class = "form-control", maxlength = 50 })

                            </div>

                        </div>

                        <div class="col-md-3 col-md-offset-1 form-group" style="padding:0px">
                            @Html.LabelFor(model => model.Client.ContactInter, new { @class = "control-label" })
                            <div class="input-group">
                                @Html.DisplayFor(model => model.Client.ContactInter, new { @class = "form-control", maxlength = 10 })
                            </div>

                        </div>
                    </div>
                    <div class="clearfix hidden-sm hidden-xs"></div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.ContactEmail, new { @class = "control-label" })

                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.ContactEmail, new { @class = "form-control", maxlength = 250 })

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <h3 style="margin-top:5px;margin-left:15px">Équipement Diesel</h3>
    <div class="col-md-8">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="box-body">
                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.NombreCamion, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.NombreCamion, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Client.NombreHeureOperation, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Client.NombreHeureOperation, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Types d'équipements", new { @class = "control-label" })
                        <div class="input-group">
                            <ul>


                                @foreach (var camion in Model.Client.ClientCamions)
                                {
                                    <li>
                                        @camion.Camion.NomFr
                                    </li>

                                }
                            </ul>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <h3 style="margin-top:5px;margin-left:15px">Fournisseur</h3>
    <div class="col-md-8">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="box-body">
                    <div class="form-group">
                        @Html.LabelFor(model => model.Fournisseur.Nom, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Fournisseur.Nom, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Province", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Fournisseur.Province.NomFr, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Ville", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Fournisseur.Ville.Nom, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Fournisseur.Adresse1, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Fournisseur.Adresse1, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Fournisseur.CodePostal, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Fournisseur.CodePostal, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Carburant", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Carburant.NomFr, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Volume mensuel", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Volume.NomFr, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Marge, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Marge, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.Label("Type d'activité", new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.Activite.NomFr, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.DateDebutContrat, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.DateDebutContrat, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.DateFinContrat, new { @class = "control-label" })
                        <div class="input-group">
                            @Html.DisplayFor(model => model.DateFinContrat, new { @class = "form-control", maxlength = 100 })
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <h3 style="margin-top:5px;margin-left:15px">Décision</h3>
    <div class="col-md-8">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="box-body">
                    <div class="form-group">
                        @Html.Label("Statut", new { @class = "control-label" })
                        <div class="input-group">
                            @switch (Model.Statut)
                            {
                                case (int)Statut.EnAttenteApprobation:
                                    <i class="fa fa-clock-o" style="font-size:20px" data-toggle="tooltip" data-placement="right" data-html="true" title="En attente d'approbation"></i>
                                    break;
                                case (int)Statut.Approuver:
                                    <i class="fa fa-check" style="color:green;font-size:20px" data-toggle="tooltip" data-placement="right" data-html="true" title="Approuver"></i>
                                    break;
                                case (int)Statut.Refuser:
                                    <i class="fa fa-times" style="color:red;font-size:20px" data-toggle="tooltip" data-placement="right" data-html="true" title="Refuser"></i>
                                    break;
                                default:
                                    break;
                            }
                        </div>

                    </div>
                    <form id="formDecision" action="@Url.Action("Details", "Admin")" method="post">
                        @Html.AntiForgeryToken()

                        <input type="hidden" id="id" name="id" value="@Model.ClientFournisseurId" />
                        <div class="form-group">
                            @Html.Label("Commentaire", new { @class = "control-label" })
                            <span style="color:#999">(En cas de refus le commentaire sera montré au client)</span>
                            <textarea class="form-control" id="Commentaire" name="Commentaire" rows="3">@Model.Commentaire</textarea>

                        </div>
                    </form>

                    <div class="form-group pull-right">
                        <i class="fa fa-check-circle fa-3x" style="color:green;cursor:pointer" id="Approuver" data-toggle="tooltip" data-placement="right" data-html="true" title="Approuver"></i>
                        <i class="fa fa-times-circle fa-3x" style="color:red;margin-left:10px;cursor:pointer" id="Refuser" data-toggle="tooltip" data-placement="right" data-html="true" title="Refuser"></i>


                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

@section Scripts {
    @Scripts.Render("~/bundles/admin")

    <script type="text/javascript">
        $(document).ready(function () {
            InitialiserDecision();

        });

        var urlApprouver = '@(Url.Action("Approuver", "Admin"))';
        var urlRefuser = '@(Url.Action("Refuser", "Admin"))';

    </script>
}
